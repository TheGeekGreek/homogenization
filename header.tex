%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Author:																 %
%-------																 %
%Yannis Baehni at University of Zurich									 %
%baehni.yannis@uzh.ch													 %
%																		 %
%Version log:															 %
%------------															 %
%06/02/16 . Basic structure												 %
%04/08/16 . Layout changes including section, contents, abstract.		 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Page Setup
\documentclass[
	12pt, 
	oneside, 
	a4paper,
	reqno,
	final
]{amsart}

\usepackage[
	left = 3cm, 
	right = 3cm, 
	top = 3cm, 
	bottom = 3cm
]{geometry}

\usepackage{mathptmx}

%Headers and footers
\usepackage{fancyhdr}
	\pagestyle{fancy}
	%Clear fields
	\fancyhf{}
	%Header right
	\fancyhead[R]{
		\footnotesize
		Yannis B\"{a}hni\\
		\href{mailto:yannis.baehni@uzh.ch}{yannis.baehni@uzh.ch}
	}
	%Header left
	\fancyhead[L]{
		\footnotesize
		Internship in Numerics\\
		Autumn 2017
	}
	%Page numbering in footer
	\fancyfoot[C]{\thepage}
	%Separation line header and footer
	\renewcommand{\headrulewidth}{0.4pt}
	%\renewcommand{\footrulewidth}{0.4pt}
	
	\setlength{\headheight}{19pt} 
\usepackage{graphicx}
\usepackage{subcaption}
%Title
\usepackage[foot]{amsaddr}
\usepackage{upref}
\usepackage{amssymb}
\usepackage{mathrsfs}
\DeclareMathAlphabet{\mathscrbf}{OMS}{mdugm}{b}{n}
%\usepackage{mathptmx}
\usepackage{xspace}
\makeatletter
\def\@textbottom{\vskip \z@ \@plus 1pt}
\let\@texttop\relax
\usepackage{etoolbox}
\patchcmd{\abstract}{\scshape\abstractname}{\textbf{\abstractname}}{}{}

\usepackage[all,cmtip]{xy}

%Section, subsection and subsubsection font
%------------------------------------------
\makeatletter
	\renewcommand{\@secnumfont}{\bfseries}
	\renewcommand\section{\@startsection{section}{1}%
  	\z@{.7\linespacing\@plus\linespacing}{.5\linespacing}%
  	{\normalfont\bfseries\centering}}
	\renewcommand\subsection{\@startsection{subsection}{2}%
    	\z@{.5\linespacing\@plus.7\linespacing}{-.5em}%
    	{\normalfont\bfseries}}%
	\renewcommand\subsubsection{\@startsection{subsubsection}{3}%
    	\z@{.5\linespacing\@plus.7\linespacing}{-.5em}%
    	{\normalfont\bfseries}}%
%Formatting title of TOC
\renewcommand{\contentsnamefont}{\bfseries}
%Table of Contents
\setcounter{tocdepth}{3}

% Add bold to \section titles in ToC and remove . after numbers
\renewcommand{\tocsection}[3]{%
  \indentlabel{\@ifnotempty{#2}{\bfseries\ignorespaces#1 #2\quad}}\bfseries#3}
% Remove . after numbers in \subsection
\renewcommand{\tocsubsection}[3]{%
  \indentlabel{\@ifnotempty{#2}{\ignorespaces#1 #2\quad}}#3}
\let\tocsubsubsection\tocsubsection% Update for \subsubsection
%...

\newcommand\@dotsep{4.5}
\def\@tocline#1#2#3#4#5#6#7{\relax
  \ifnum #1>\c@tocdepth % then omit
  \else
    \par \addpenalty\@secpenalty\addvspace{#2}%
    \begingroup \hyphenpenalty\@M
    \@ifempty{#4}{%
      \@tempdima\csname r@tocindent\number#1\endcsname\relax
    }{%
      \@tempdima#4\relax
    }%
    \parindent\z@ \leftskip#3\relax \advance\leftskip\@tempdima\relax
    \rightskip\@pnumwidth plus1em \parfillskip-\@pnumwidth
    #5\leavevmode\hskip-\@tempdima{#6}\nobreak
    \leaders\hbox{$\m@th\mkern \@dotsep mu\hbox{.}\mkern \@dotsep mu$}\hfill
    \nobreak
    \hbox to\@pnumwidth{\@tocpagenum{\ifnum#1=1\bfseries\fi#7}}\par% <-- \bfseries for \section page
    \nobreak
    \endgroup
  \fi}
\AtBeginDocument{%
\expandafter\renewcommand\csname r@tocindent0\endcsname{0pt}
}
\def\l@subsection{\@tocline{2}{0pt}{2.5pc}{5pc}{}}
\def\l@subsubsection{\@tocline{2}{0pt}{4.5pc}{5pc}{}}
\makeatother

\advance\footskip0.4cm
\textheight=54pc    %a4paper
\textheight=50.5pc %letterpaper
\advance\textheight-0.4cm
\calclayout

%Font settings
%\usepackage{anyfontsize}
%Footnote settings
%\usepackage{mathptmx}
\usepackage{footmisc}
%	\renewcommand*{\thefootnote}{\fnsymbol{footnote}}
\usepackage{commath}
%Further math environments
%Further math fonts (loads amsfonts implicitely)
\usepackage{amssymb}
%Redefinition of \text
%\usepackage{amstext}
\usepackage{upref}
%Graphics
%\usepackage{graphicx}
%\usepackage{caption}
%\usepackage{subcaption}
%Frames
\usepackage{mdframed}
\allowdisplaybreaks
%\usepackage{interval}
\newcommand{\toup}{%
  \mathrel{\nonscript\mkern-1.2mu\mkern1.2mu{\uparrow}}%
}
\newcommand{\todown}{%
  \mathrel{\nonscript\mkern-1.2mu\mkern1.2mu{\downarrow}}%
}
\AtBeginDocument{\renewcommand*\d{\mathop{}\!\mathrm{d}}}
\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}
\DeclareMathOperator\Log{Log}
\DeclareMathOperator\Arg{Arg}
\DeclareMathOperator\sech{sech}
\DeclareMathOperator*\esssup{ess.sup}
\DeclareMathOperator\id{id}
\DeclareMathOperator\res{res}
\let\div\undefined
\DeclareMathOperator\div{div}
\DeclareMathOperator\sgn{sgn}
%\usepackage{hhline}
%\usepackage{booktabs} 
%\usepackage{array}
%\usepackage{xfrac} 
%\everymath{\displaystyle}
%Enumerate
\usepackage{tikz}
\usetikzlibrary{external}
\tikzexternalize % activate!
\usetikzlibrary{patterns}
\pgfdeclarepatternformonly{adjusted lines}{\pgfqpoint{-1pt}{-1pt}}{\pgfqpoint{40pt}{40pt}}{\pgfqpoint{39pt}{39pt}}%
{
  \pgfsetlinewidth{.8pt}
  \pgfpathmoveto{\pgfqpoint{0pt}{0pt}}
  \pgfpathlineto{\pgfqpoint{39.1pt}{39.1pt}}
  \pgfusepath{stroke}
}
\usepackage{enumitem} 
%\renewcommand{\labelitemi}{$\bullet$}
%\renewcommand{\labelitemii}{$\ast$}
%\renewcommand{\labelitemiii}{$\cdot$}
%\renewcommand{\labelitemiv}{$\circ$}
%Colors
%\usepackage{color}
%\usepackage[cmtip, all]{xy}
%Theorems
\newtheoremstyle{bold}              	 %Name
  {}                                     %Space above
  {}                                     %Space below
  {\itshape}		                     %Body font
  {}                                     %Indent amount
  {\bfseries}                             %Theorem head font
  {.}                                    %Punctuation after theorem head
  { }                                    %Space after theorem head, ' ', 
  										 %	or \newline
  {\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}} 
\theoremstyle{bold}
\newtheorem*{definition*}{Definition}
\newtheorem{definition}{Definition}[section]
\newtheorem*{lemma*}{Lemma}
\newtheorem{lemma}{Lemma}[section]
\newtheorem{Proof}{Proof}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{properties}{Properties}[section]
\newtheorem{corollary}{Corollary}[section]
\newtheorem*{theorem*}{Theorem}
\newtheorem{theorem}{Theorem}[section]
\newtheoremstyle{solution}              	 %Name
{}                                     %Space above
{}                                     %Space below
{}		      			               %Body font
{}                                     %Indent amount
{\bfseries}                             %Theorem head font
{.}                                    %Punctuation after theorem head
{ }                                    %Space after theorem head, ' ', 
%	or \newline
{\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}} 
\theoremstyle{solution}
\newtheorem*{solution}{LÃ¶sung}
\newtheorem{remark}{Remark}[section]
\newtheorem{examples}{Examples}[section]
\newtheorem{example}{Example}[section]
\newtheoremstyle{exercise}              	 %Name
{}                                     %Space above
{}                                     %Space below
{\small}		      			               %Body font
{}                                     %Indent amount
{\bfseries}                             %Theorem head font
{.}                                    %Punctuation after theorem head
{ }                                    %Space after theorem head, ' ', 
%	or \newline
{\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}} 
\theoremstyle{exercise}
\newtheorem{exercise}{Aufgabe}
%German non-ASCII-Characters
%Graphics-Tool
%\usepackage{tikz}
%\usepackage{tikzscale}
%\usepackage{bbm}
%\usepackage{bera}
%Listing-Setup
%Bibliographie
\usepackage[backend=bibtex, style=alphabetic]{biblatex}
%\usepackage[babel, german = swiss]{csquotes}
\bibliography{bibliography}
%PDF-Linking
%\usepackage[hyphens]{url}
\usepackage[bookmarksopen=true,bookmarksnumbered=true]{hyperref}
%\PassOptionsToPackage{hyphens}{url}\usepackage{hyperref}
\hypersetup{
  colorlinks   = true, %Colours links instead of ugly boxes
  urlcolor     = blue, %Colour for external hyperlinks
  linkcolor    = blue, %Colour of internal links
  citecolor    = blue %Colour of citations
}
%Weierstrass-P symbol for power set
\newcommand{\powerset}{\raisebox{.15\baselineskip}{\Large\ensuremath{\wp}}}
\newcommand{\bld}[1]{\boldmath\textit{\textbf{#1}}\unboldmath}

\makeatletter
\providecommand*{\rightharpoonupfill@}{%
  \arrowfill@\relbar\relbar\rightharpoonup
}
\providecommand*{\xrightharpoonup}[2][]{%
  \ext@arrow 0579\rightharpoonupfill@{#1}{#2}%
}
\makeatother

\usepackage{listings}

\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\lstset{ %
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
  basicstyle=\scriptsize,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygreen},    % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  frame=single,	                   % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{blue},       % keyword style
  language=Octave,                 % the language of the code
  morekeywords={*,...},            % if you want to add more keywords to the set
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{mymauve},     % string literal style
  tabsize=2,	                   % sets default tabsize to 2 spaces
  title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}